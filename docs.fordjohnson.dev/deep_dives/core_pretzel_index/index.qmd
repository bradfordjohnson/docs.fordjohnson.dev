---
html-math-method:
  method: katex

execute:
  freeze: auto
---

# The Core Pretzel Index (CPI) {.unnumbered}

::: {.callout-note}
Scoring pretzels, one bite at a time! Data collection is in progress; stay tuned for the ultimate pretzel rankings.
:::

A personally developed methodology for ranking and comparing pretzels based on key factors like texture, flavor, and freshness, using a weighted scoring system with exponential decay for multiple visits.

## Motivation

My wife and I have a passion for trying new restaurants, and we always make it a point to order a hot pretzel to compare with the ones we've had before. In fact, we even had pretzels and cheese as a late-night snack at our wedding. This love for pretzels sparked the idea of properly ranking them, and my wife eagerly agreed to join me in collecting data to create a comprehensive scoring system.

## Approach

### Metrics

#### Composite Scoring

To rank pretzels in a way that captures all the important qualities, I developed a composite score that combines multiple factors influencing pretzel quality. The score is made up of several key metrics grouped into categories, and we rate each metric on a scale of 1-10 based on how well the pretzel performs in each area. These ratings are then weighted according to their importance, providing a comprehensive evaluation of the overall pretzel experience.

::: {.panel-tabset}

## Metric Group Weights


| Metric Group                   | Description                                                                 | CPI Weight (%) |
|--------------------------------|-----------------------------------------------------------------------------|--------|
| Texture & Structure        | How well the pretzel holds up in texture, crunch, chewiness, and structural integrity. | 25%    |
| Flavor & Seasoning         | Flavor balance, seasoning quality, and overall dough flavor complexity.     | 20%    |
| Freshness & Temperature    | Warmth, freshness, and the overall experience of the pretzel being freshly baked. | 15%    |
| Dipping Sauce Factor       | How well the pretzel pairs with the dipping sauces available (e.g., flavor match, variety). | 10%    |
| Overall Enjoyment & Presentation | Overall visual appeal, how well it could be shared, and how satisfying the pretzel is as a total experience. | 30%    |

: CPI Composite Score Weights by Metric Group {.striped}

## Individual Metric Weights


| Metric                             | Metric Group                    | CPI Weight (%) |
|------------------------------------|----------------------------------|------------|
| Crunch-to-Chew Ratio (CCR)        | Texture & Structure          | 10%        |
| Knot Integrity                    | Texture & Structure          | 10%        |
| Density & Airiness                | Texture & Structure          | 5%         |
| Salt / Sugar + Cinnamon Distribution & Quality (SDQ) | Flavor & Seasoning           | 10%        |
| Dough Flavor & Complexity (DFC)   | Flavor & Seasoning           | 5%         |
| Buttery Goodness                  | Flavor & Seasoning           | 5%         |
| Fresh-Baked Factor (FBF)          | Freshness & Temperature      | 15%        |
| Dip Compatibility Score           | Dipping Sauce Factor         | 10%        |
| Shareability                      | Overall Enjoyment & Presentation | 15%        |
| Satisfaction Score (SS)           | Overall Enjoyment & Presentation | 10%        |
| Presentation & Aesthetics (PA)    | Overall Enjoyment & Presentation | 5%         |

: CPI Composite Score Weights by Metric {.striped}


:::


This composite score ensures a balanced assessment of each pretzel experience, enabling comparisons, trends, and insights across pretzels and restaurants.

While some of this may be subject to the occasional personal preference (*though we consider ourselves authorities on the matter*), this methodology can certainly be applied to other data analysis scenarios as well.

#### Decay-Adjusted Score

The decay-adjusted score prioritizes recent visits by reducing the weight of past visits using an exponential decay function. This ensures current pretzel quality is reflected while minimizing the impact of outdated data. It helps track trends and fluctuations in pretzel quality, offering a comprehensive view of each restaurant's performance. This score would be the overall score used to determine rankings at a given moment.

The table below illustrates how the decay weight is applied to each visitâ€™s base CPI score to calculate the weighted score and the final decay-adjusted score.

**Decay Adjusted Score:** 93.75%

| Restaurant | Visit | Base CPI Score | Decay Weight | Weighted Score |
|------------|-------|----------------|--------------|----------------|
| X          | 1     | 80%          | 0.05         | 3.98%          |
| X          | 2     | 90%          | 0.14         | 12.18%         |
| X          | 3     | 80%          | 0.37         | 29.43%         |
| X          | 4     | 100%         | 1.00         | 100%        |

: Decay Table Example {.striped}


</br>


$$
\text{DAS} = \frac{\sum_{i=1}^{n} (\text{CPI}_i \times \text{Decay Weight}_i)}{\sum_{i=1}^{n} \text{Decay Weight}_i}
$$

#### Price-to-Value (P2V) Score

::: {.callout-note}
As we collect data, this score may be refined to prevent expensive pretzels from being unfairly penalized while still emphasizing value.
:::

The Price-to-Value (P2V) Score helps assess whether a pretzel is worth its cost by comparing its quality to its price. A high P2V score indicates a pretzel that delivers great taste, texture, and experience for the money, while a low score suggests it's overpriced for what you get.

### Data Collection

Data is currently logged manually in spreadsheets, but the ultimate goal is to develop a personal web app and dashboard.

| Restaurant | Pretzel Type | Visit Number | Menu Price | Base CPI Score |
|------------|--------------|--------------|------------|----------------|
| Holy City  | Salt         | 1            | $6.50      | 79.00%         |
| Holy City  | Salt         | 2            | $6.50      | 81.50%         |
| Holy City  | Salt         | 3            | $6.50      | 83.50%         |

: Current Observations {.striped}

| Restaurant | Pretzel Type | # of Rankings | Adjusted CPI Score |
|------------|--------------|---------------|--------------------|
| Holy City  | Salt         | 3             | 82.35%             |

: Adjusted CPI Score {.striped}

## Links

Coming soon :)
